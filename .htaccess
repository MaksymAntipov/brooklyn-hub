# Включаем модуль для преобразования URL
RewriteEngine On

# ----------------------------------------------------
# 1. Перенаправляем все запросы с HTTP на HTTPS
# ----------------------------------------------------
RewriteCond %{HTTPS} off
RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [R=301,L]

# ----------------------------------------------------
# 2. Убираем "index.html" из URL-адреса
# ----------------------------------------------------
# Если кто-то заходит на site.com/index.html...
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /index\.html(.*)\ HTTP/
# ...перенаправляем его на чистый адрес site.com/...
RewriteRule ^index\.html(.*)$ https://%{HTTP_HOST}/$1 [R=301,L]

# ----------------------------------------------------
# 3. Убираем расширение ".html" со всех страниц
# ----------------------------------------------------
# Если кто-то заходит на site.com/page.html...
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /([^/]+)\.html\ HTTP/
# ...перенаправляем его на site.com/page
RewriteRule ^([^/]+)\.html$ https://%{HTTP_HOST}/$1 [R=301,L]

# ----------------------------------------------------
# 4. Позволяет серверу "находить" страницы без .html
#    (внутренняя обработка, невидимая пользователю)
# ----------------------------------------------------
# Если запрашивается URL без расширения (например, /about)...
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
# ...и на сервере есть файл /about.html, то показываем его содержимое.
RewriteCond %{REQUEST_FILENAME}.html -f
RewriteRule ^(.*)$ $1.html [L]